---
import { siteConfig } from '../data/site.config';
---
<header id="site-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <div class="glass-dark">
    <div class="max-w-7xl mx-auto px-4 sm:px-6">
      <div class="flex items-center justify-between h-16 md:h-20">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-3 group" aria-label="Mississippi Sports Home">
          <img src="/logo.png" alt="Mississippi Sports Group" class="h-10 md:h-12 w-auto" width="48" height="48" />
          <div class="hidden sm:block">
            <span class="font-display text-lg md:text-xl font-bold text-white tracking-wide uppercase leading-none">
              Mississippi Sports
            </span>
          </div>
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex items-center gap-8" aria-label="Main navigation">
          <a href="#news" class="text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider">News</a>
          <a href="#about" class="text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider">About</a>
          <a href="#contact" class="text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider">Contact</a>
          <a
            href={siteConfig.appStore.url}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 bg-gradient-to-r from-gold-500 to-gold-400 text-navy-900 font-display font-bold text-sm uppercase tracking-wider px-5 py-2.5 rounded-lg hover:from-gold-400 hover:to-gold-300 transition-all hover:shadow-lg hover:shadow-gold-500/25 hover:-translate-y-0.5"
            id="header-download-cta"
          >
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.71 19.5C17.88 20.74 17 21.95 15.66 21.97C14.32 21.99 13.89 21.18 12.37 21.18C10.84 21.18 10.37 21.95 9.09997 21.99C7.78997 22.03 6.79997 20.68 5.95997 19.47C4.24997 17 2.93997 12.45 4.69997 9.39C5.56997 7.87 7.12997 6.91 8.81997 6.88C10.1 6.86 11.32 7.75 12.11 7.75C12.89 7.75 14.37 6.68 15.92 6.84C16.57 6.87 18.39 7.1 19.56 8.82C19.47 8.88 17.39 10.1 17.41 12.63C17.44 15.65 20.06 16.66 20.09 16.67C20.06 16.74 19.67 18.11 18.71 19.5ZM13 3.5C13.73 2.67 14.94 2.04 15.94 2C16.07 3.17 15.6 4.35 14.9 5.19C14.21 6.04 13.07 6.7 11.95 6.61C11.8 5.46 12.36 4.26 13 3.5Z"/></svg>
            Download App
          </a>
        </nav>

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-btn"
          class="md:hidden text-white p-2 hover:bg-white/10 rounded-lg transition-colors"
          aria-label="Toggle menu"
          aria-expanded="false"
        >
          <svg class="w-6 h-6 menu-open" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg class="w-6 h-6 menu-close hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="md:hidden hidden border-t border-white/10">
      <div class="px-4 py-4 space-y-3">
        <a href="#news" class="block text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider py-2">News</a>
        <a href="#about" class="block text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider py-2">About</a>
        <a href="#contact" class="block text-sm font-medium text-gray-300 hover:text-gold-400 transition-colors uppercase tracking-wider py-2">Contact</a>
        <a
          href={siteConfig.appStore.url}
          target="_blank"
          rel="noopener noreferrer"
          class="block text-center bg-gradient-to-r from-gold-500 to-gold-400 text-navy-900 font-display font-bold text-sm uppercase tracking-wider px-5 py-3 rounded-lg mt-2"
        >
          Download App
        </a>
      </div>
    </div>
  </div>
</header>

<script>
  // Mobile menu toggle
  const btn = document.getElementById('mobile-menu-btn');
  const menu = document.getElementById('mobile-menu');
  const openIcon = btn?.querySelector('.menu-open');
  const closeIcon = btn?.querySelector('.menu-close');

  btn?.addEventListener('click', () => {
    const isOpen = !menu?.classList.contains('hidden');
    menu?.classList.toggle('hidden');
    openIcon?.classList.toggle('hidden');
    closeIcon?.classList.toggle('hidden');
    btn.setAttribute('aria-expanded', String(!isOpen));
  });

  // Close menu on link click
  menu?.querySelectorAll('a').forEach((link) => {
    link.addEventListener('click', () => {
      menu?.classList.add('hidden');
      openIcon?.classList.remove('hidden');
      closeIcon?.classList.add('hidden');
      btn?.setAttribute('aria-expanded', 'false');
    });
  });

  // Header scroll effect
  const header = document.getElementById('site-header');
  let lastScroll = 0;
  window.addEventListener('scroll', () => {
    const currentScroll = window.scrollY;
    if (currentScroll > 100) {
      header?.classList.add('shadow-2xl');
    } else {
      header?.classList.remove('shadow-2xl');
    }
    lastScroll = currentScroll;
  }, { passive: true });
</script>
